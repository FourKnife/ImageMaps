!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(e,s){this.container=t(e),this.mapEl=null,this.svgEl=null,this.options=t.extend(!0,{},Y,s),this.shapeType=this.options.shape,this.isEditMode=this.options.isEditMode,this.shapeStyle=this.options.shapeStyle,this.shapeText="",this.shapeImageUrl="",this.shapeCoords=null,this.vertexCoords=null,this.grabType=null,this.containerWidth=0,this.containerHeight=0,this.touchStartCoords={x:null,y:null},this.dragInfo={face:{x:null,y:null},vertex:{x:null,y:null}},this.shapeLimitCoords={x:30,y:30,radius:15},this.allShapeInfo={}}function s(e,s){var r=A();if(this.container.attr("usemap")){var h=this.container.attr("usemap").replace("#","");this.mapEl=t("body").find("map[name="+h+"]")}else this.mapEl=t("<map name="+r+"></map>").insertAfter(this.container),this.container.attr("usemap","#"+r);this.containerWidth=this.container.width(),this.containerHeight=this.container.height();var n=this.containerWidth,p=this.containerHeight,l=n/2,d=p/2,c=this.shapeType,f=[],u=!1;if(e=k(e),e instanceof Array)c===P.RECT||c===P.IMAGE?f=t.extend([],X.rect,e):c===P.CIRCLE?f=t.extend([],X.circle,e):c===P.ELLIPSE?f=t.extend([],X.ellipse,e):c===P.TEXT?(e[0]||(e[0]=l,u=!0),e[1]||(e[1]=d,u=!0),e[2]||(e[2]=20),f=t.extend([],X.text,e)):c===P.POLY;else{var y=.1*n,g=.1*p,E=y>=g?g:y;if(c===P.RECT)f=t.extend([],X.rect,[l-y,d-g,l+y,d+g]);else if(c===P.CIRCLE)f=t.extend([],X.circle,[l,d,E]);else if(c===P.ELLIPSE)f=t.extend([],X.ellipse,[l,d,E,E]);else if(c===P.IMAGE){var v=R(this.shapeImageUrl);y=v.width/2,g=v.height/2,f=[l-y,d-g,l+y,d+g]}else c===P.POLY}var x=this.mapEl.find("._shape_face").length,m=c,C={};(c===P.TEXT||c===P.IMAGE)&&(m=P.RECT,C=c===P.TEXT?{text:this.shapeText}:{href:this.shapeImageUrl}),a.call(this,f,r,s,x),this.setShapeCoords(f),this.updateShapeInfo(x,{coords:f,type:c,url:s,style:this.shapeStyle},C),u&&this.isEditMode&&c===P.TEXT&&o.call(this),c===P.ELLIPSE&&(m=P.CIRCLE,f=[f[0],f[1],X.ellipse[2],X.ellipse[2]]),i.call(this,m,f,s,x)}function a(e,s,a,i){var h=this.container.width(),o=this.container.height();if("undefined"!=typeof document.createElementNS){var n=this.mapEl.find("svg").get(0),p=t(n),l=this.shapeType;n||(n=document.createElementNS(N,"svg"),p=t(n),this.svgEl=p,this.isEditMode?this.attachEvents(p,[{type:"mousedown",handler:y}]):this.attachEvents(this.mapEl,[{type:"touchstart",handler:f},{type:"click touchend",handler:u}]),this.attachEvents(window,[{type:"resize",handler:v}])),n.setAttribute("width",h),n.setAttribute("height",o);var d=this.container.position();p.attr({xmlns:N,"xmlns:xlink":G,version:"1.1","data-Id":s}).css({position:"absolute",zIndex:1e3,overflow:"hidden",top:d.top,left:d.left});var c=r.call(this,l,e,a,i);p.append(c),this.mapEl.append(p)}}function i(e,s,a,i){t("<area shape="+e+" coords="+s.join(",")+" href="+(a||"#")+" data-index="+i+" "+(a?'target="_blank"':"")+">").appendTo(this.mapEl)}function r(e,s,a,i){e===P.POLY&&(e=P.POLYLINE);var r=t(document.createElementNS(N,e)),o=t(document.createElementNS(N,"g"));h.call(this,s,r);var p="default";if(this.isEditMode?p="move":""!==a&&(p="pointer"),this.setShapeStyle({cursor:p}),r.css(this.shapeStyle),e===P.TEXT&&r.css({"fill-opacity":"","stroke-opacity":""}),r.attr("data-index",i),o.append(r),this.setShapeElement(r),this.isEditMode&&"text"!==e){for(var l=n(e,s,i),d=0,c=l.length;c>d;d++)l[d].appendTo(o);this.setVertexElements(l)}return o}function h(t,e,s){e=e||this.shapeEl;var a=s?s.type:this.shapeType;a===P.RECT||a===P.IMAGE?(e.attr({x:t[0],y:t[1],"class":"_shape_face"}),t[2]&&e.attr("width",t[2]-t[0]),t[3]&&e.attr("height",t[3]-t[1]),a===P.IMAGE&&(e.get(0).setAttributeNS(G,"href",s?s.href:this.shapeImageUrl),e.get(0).setAttribute("preserveAspectRatio","none"))):a===P.CIRCLE?(e.attr({cx:t[0],cy:t[1],"class":"_shape_face"}),t[2]&&e.attr("r",t[2])):a===P.ELLIPSE?(e.attr({cx:t[0],cy:t[1],"class":"_shape_face"}),t[2]&&e.attr("rx",t[2]),t[3]&&e.attr("ry",t[3])):a===P.TEXT?(e.attr({x:t[0],y:t[1],"font-size":t[2],"class":"_shape_face"}),e.text(this.shapeText)):a===P.POLY}function o(){var t=this.shapeEl,e=t.get(0).getBBox(),s=e.width/2,a=parseFloat(t.attr("font-size"))*O/2,i=parseInt(t.attr("x"),10),r=parseInt(t.attr("y"),10),h=i-s,o=r+a;this.updateShapeInfo(t.data("index"),{coords:[h,o,t.attr("font-size")]}),t.attr({x:h,y:o})}function n(e,s,a){for(var i=null,r=[],h=l(e,s),o=0,n=h.length;n>o;o++)i=t(document.createElementNS(N,"rect")),i.attr("data-index",a).css({fill:"#ffffff",stroke:"#000000","stroke-width":2}),r.push(i);return p(h,r,e),r}function p(e,s,a){for(var i=0,r=e.length;r>i;i++){var h=e[i];t(s[i]).attr({x:h.x-3,y:h.y-3,width:7,height:7,"data-direction":h.type,"class":"_shape_vertex"}).css("cursor",c(h.type))}}function l(t,e){var s=[];return t===P.RECT||t===P.IMAGE?s=[{x:e[0],y:e[1],type:"nw"},{x:e[0],y:e[3],type:"sw"},{x:e[2],y:e[1],type:"ne"},{x:e[2],y:e[3],type:"se"},{x:(e[2]-e[0])/2+e[0],y:e[1],type:"n"},{x:(e[2]-e[0])/2+e[0],y:e[3],type:"s"},{x:e[0],y:(e[3]-e[1])/2+e[1],type:"w"},{x:e[2],y:(e[3]-e[1])/2+e[1],type:"e"}]:t===P.CIRCLE?s=[{x:e[0],y:e[1]-e[2],type:"n"},{x:e[0],y:e[1]+e[2],type:"s"},{x:e[0]-e[2],y:e[1],type:"w"},{x:e[0]+e[2],y:e[1],type:"e"}]:t===P.ELLIPSE?s=[{x:e[0],y:e[1]-e[3],type:"n"},{x:e[0],y:e[1]+e[3],type:"s"},{x:e[0]-e[2],y:e[1],type:"w"},{x:e[0]+e[2],y:e[1],type:"e"}]:t===P.POLY,s}function d(t,e,s){var a=this.svgEl.find('._shape_face[data-index="'+e.data("index")+'"]');s=s||this.shapeType,s===P.TEXT?t=M(a):s===P.ELLIPSE&&(t=[t[0],t[1],X.ellipse[2]]),e.attr("coords",t.join(","))}function c(t){return t+"-resize"}function f(t){var e=t.originalEvent.touches[0];this.touchStartCoords.x=e.pageX,this.touchStartCoords.y=e.pageY}function u(e){if("area"!==e.currentTarget.tagName.toLowerCase()){if(e.preventDefault(),this.dragInfo.face.x&&this.dragInfo.face.x!==e.pageX||this.dragInfo.face.y&&this.dragInfo.face.y!==e.pageY||"svg"===e.target.tagName.toLowerCase()||"touchend"===e.type&&e.originalEvent.changedTouches[0].pageX!==this.touchStartCoords.x&&e.originalEvent.changedTouches[0].pageY!==this.touchStartCoords.y)return;var s=t(e.target),a=s.attr("data-index"),i=this.mapEl.find('area[data-index="'+a+'"]'),r=i.attr("href");"#"!==r&&window.open(i.attr("href"))}this.options.onClick.call(this,e,i.attr("href"))}function y(e){if(e.preventDefault(),"svg"!==e.target.tagName.toLowerCase()){var s=t(e.target),a=s.attr("data-index"),i=this.getShapeInfo(a),r=s.parent(),h=r.find(":first-child"),o=[],n=h.get(0).tagName.toLowerCase();if(n===P.RECT||n===P.IMAGE){var p=parseInt(h.attr("x"),10),d=parseInt(h.attr("y"),10);o=[p,d,p+parseInt(h.attr("width"),10),d+parseInt(h.attr("height"),10)],n===P.IMAGE&&this.setImageShape(h.attr("href"))}else if(n===P.CIRCLE){var p=parseInt(h.attr("cx"),10),d=parseInt(h.attr("cy"),10);o=[p,d,parseInt(h.attr("r"),10)]}else if(n===P.ELLIPSE){var p=parseInt(h.attr("cx"),10),d=parseInt(h.attr("cy"),10);o=[p,d,parseInt(h.attr("rx"),10),parseInt(h.attr("ry"),10)]}else if(n===P.TEXT){var p=parseFloat(h.attr("x")),d=parseFloat(h.attr("y")),c=parseFloat(h.attr("font-size"));o=[p,d,c]}else n===P.POLYGON&&(n=P.POLY);if(this.setShapeType(n),this.setShapeElement(h),this.setShapeCoords(o),n!==P.TEXT){h.attr("data-fill",h.css("fill")),h.css("fill","#ffffff"),this.setVertexCoords(l(n,o));var f=[],u=this.mapEl.find('._shape_vertex[data-index="'+a+'"]');u.each(function(){f.push(t(this))}),this.setVertexElements(f)}s.is("._shape_face")?(this.grabType="face",C.call(this,s,e.pageX,e.pageY)):s.is("._shape_vertex")&&(this.grabType="vertex",_.call(this,s,a)),this.attachEvents(this.mapEl.parent(),[{type:"mouseup",handler:g},{type:"mousemove",handler:E}]),this.options.onSelect.call(this,e,i),this.options.onMouseDown.call(this,e,n,o)}}function g(e){var s=t(e.target),a=this.shapeEl;a.css("fill",a.attr("data-fill")),s.attr("data-movable",!1);var i=S.call(this);this.setShapeCoords(i),this.updateShapeInfo(a.data("index"),{coords:i}),this.detachEvents(this.mapEl.parent(),[{type:"mouseup",handler:g},{type:"mousemove",handler:E}]),this.options.onMouseUp.call(this,e,this.shapeType,i)}function E(e){var s=t(e.target),a=this.shapeCoords[0],i=this.shapeCoords[1],r=this.grabType,o=this.shapeType,n={};if("face"===r||"vertex"===r){if("face"===r){var l=a+e.pageX,c=i+e.pageY;n=I.call(this,l-this.dragInfo.face.x,c-this.dragInfo.face.y)}else"vertex"===r&&(n=T.call(this,e.pageX-this.svgEl.offset().left,e.pageY-this.svgEl.offset().top));o!==P.TEXT&&(this.setVertexCoords(n.vertexCoords),p(n.vertexCoords,this.vertexEls,this.shapeType));var f=parseInt(n.grabEl.attr("data-index"),10);h.call(this,n.movedCoords,this.svgEl.find('._shape_face[data-index="'+f+'"]')),d.call(this,n.movedCoords,this.mapEl.find('area[data-index="'+f+'"]')),(s.is("._shape_face")||s.is("._shape_vertex"))&&(Math.abs(this.dragInfo.face.x-e.pageX)<=1||Math.abs(this.dragInfo.face.y-e.pageY)<=1)&&this.svgEl.append(s.parent()),this.options.onMouseMove.call(this,e,o,n.movedCoords)}}function v(t){var e=this.container.width(),s=this.container.height();(this.containerWidth!==e||this.containerHeight!==s)&&m.call(this,e,s)}function x(t){var e=t[0],s=t.length<2?t[0]:t[1],a=.01*e*this.container.width(),i=.01*s*this.container.height();this.container.css({width:a+"px",height:i+"px"});var r=this;setTimeout(function(){r.svgEl&&r.svgEl.length>0&&m.call(r,a,i)},0)}function m(e,s){var a=this,i=this.allShapeInfo,r=e/this.containerWidth,o=s/this.containerHeight,n=this.container.position();this.svgEl.get(0).setAttribute("width",e),this.svgEl.get(0).setAttribute("height",s),console.log(this.container.position()),this.svgEl.css({top:n.top,left:n.left}),t.each(i,function(t,e){e.coords=b(e.coords,e.type,r,o),p(l(e.type,e.coords),a.svgEl.find('._shape_vertex[data-index="'+e.index+'"]'),e.type),h.call(a,e.coords,a.svgEl.find('._shape_face[data-index="'+e.index+'"]'),e),d.call(a,e.coords,a.mapEl.find('area[data-index="'+e.index+'"]'),e.type)}),this.containerWidth=e,this.containerHeight=s}function C(t,e,s){this.dragInfo.face.x=e,this.dragInfo.face.y=s,t.attr("data-movable",!0)}function I(t,e){var s=this.shapeEl;if("false"!==s.attr("data-movable")){var a=[],i=[],r=this.shapeType;if(r===P.RECT||r===P.IMAGE){var h=parseInt(s.attr("width"),10),o=parseInt(s.attr("height"),10),n=t+h,p=e+o;a=[t,e,n,p],i=l(P.RECT,a)}else r===P.CIRCLE?(a=[t,e,parseInt(s.attr("r"),10)],i=l(P.CIRCLE,a)):r===P.ELLIPSE?(a=[t,e,parseInt(s.attr("rx"),10),parseInt(s.attr("ry"),10)],i=l(P.ELLIPSE,a)):r===P.TEXT?a=[t,e]:r===P.POLY;return{movedCoords:a,vertexCoords:i,grabEl:s}}}function S(){var t=this.shapeEl,e=this.shapeType,s=[];if(e===P.RECT||e===P.IMAGE){var a=parseInt(t.attr("x"),10),i=parseInt(t.attr("y"),10);s=[a,i,a+parseInt(t.attr("width"),10),i+parseInt(t.attr("height"),10)]}else e===P.CIRCLE?s=[parseInt(t.attr("cx"),10),parseInt(t.attr("cy"),10),parseInt(t.attr("r"),10)]:e===P.ELLIPSE?s=[parseInt(t.attr("cx"),10),parseInt(t.attr("cy"),10),parseInt(t.attr("rx"),10),parseInt(t.attr("ry"),10)]:e===P.TEXT?s=[parseInt(t.attr("x"),10),parseInt(t.attr("y"),10)]:e===P.POLY;return s}function _(t,e){this.setVertexElement(t);var s=0;this.vertexEls.forEach(function(e,a){t.get(0)===e.get(0)&&(s=a)});var a=this.vertexCoords[s];this.dragInfo.vertex.x=a.x,this.dragInfo.vertex.y=a.y,t.attr("data-movable",!0)}function T(t,e){if("false"!==this.vertexEl.attr("data-movable")){var s=[],a=[],i=this.shapeType,r=this.vertexEl.attr("data-direction");if(i===P.RECT||i===P.IMAGE)switch(r){case"nw":s=L.call(this,[t,e,this.shapeCoords[2],this.shapeCoords[3]],r);break;case"sw":s=L.call(this,[t,this.shapeCoords[1],this.shapeCoords[2],e],r);break;case"ne":s=L.call(this,[this.shapeCoords[0],e,t,this.shapeCoords[3]],r);break;case"se":s=L.call(this,[this.shapeCoords[0],this.shapeCoords[1],t,e],r);break;case"n":s=L.call(this,[this.shapeCoords[0],e,this.shapeCoords[2],this.shapeCoords[3]],r);break;case"s":s=L.call(this,[this.shapeCoords[0],this.shapeCoords[1],this.shapeCoords[2],e],r);break;case"w":s=L.call(this,[t,this.shapeCoords[1],this.shapeCoords[2],this.shapeCoords[3]],r);break;case"e":s=L.call(this,[this.shapeCoords[0],this.shapeCoords[1],t,this.shapeCoords[3]],r)}else if(i===P.CIRCLE)switch(r){case"n":s=[this.shapeCoords[0],this.shapeCoords[1],w.call(this,this.shapeCoords[1]-e)];break;case"s":s=[this.shapeCoords[0],this.shapeCoords[1],w.call(this,e-this.shapeCoords[1])];break;case"w":s=[this.shapeCoords[0],this.shapeCoords[1],w.call(this,this.shapeCoords[0]-t)];break;case"e":s=[this.shapeCoords[0],this.shapeCoords[1],w.call(this,t-this.shapeCoords[0])]}else if(i===P.ELLIPSE)switch(r){case"n":s=[this.shapeCoords[0],this.shapeCoords[1],this.shapeCoords[2],w.call(this,this.shapeCoords[1]-e)];break;case"s":s=[this.shapeCoords[0],this.shapeCoords[1],this.shapeCoords[2],w.call(this,e-this.shapeCoords[1])];break;case"w":s=[this.shapeCoords[0],this.shapeCoords[1],w.call(this,this.shapeCoords[0]-t),this.shapeCoords[3]];break;case"e":s=[this.shapeCoords[0],this.shapeCoords[1],w.call(this,t-this.shapeCoords[0]),this.shapeCoords[3]]}else shapetype===P.POLY;return a=l(i,s),{movedCoords:s,vertexCoords:a,grabEl:this.vertexEl}}}function L(t,e){var s=t[0],a=t[1],i=t[2],r=t[3];return i-s<=this.shapeLimitCoords.x&&(("se"===e||"ne"===e||"e"===e)&&(i=s+this.shapeLimitCoords.x),("nw"===e||"sw"===e||"w"===e)&&(s=i-this.shapeLimitCoords.x)),r-a<=this.shapeLimitCoords.y&&(("se"===e||"sw"===e||"s"===e)&&(r=a+this.shapeLimitCoords.y),("nw"===e||"ne"===e||"n"===e)&&(a=r-this.shapeLimitCoords.y)),[s,a,i,r]}function w(t){var e=this.shapeCoords[2];return e=t<=this.shapeLimitCoords.radius?this.shapeLimitCoords.radius:t}function b(t,e,s,a){var i=[];if(e===P.RECT||e===P.IMAGE||e===P.ELLIPSE)i=[t[0]*s,t[1]*a,t[2]*s,t[3]*a];else if(e===P.CIRCLE){var r=1;r=s>=a?a:s,1===s&&(r=a),1===a&&(r=s),i=[t[0]*s,t[1]*a,t[2]*r]}else e===P.TEXT?i=[t[0]*s,t[1]*a,t[2]*s]:e===P.POLY;return i}function M(t){var e=parseFloat(t.attr("x")),s=parseFloat(t.attr("y")),a=t.get(0).getBBox(),i=a.width,r=parseFloat(t.attr("font-size"))*O/2;return[e,s-r,e+i,s]}function k(t){if(!t)return null;for(var e=[],s=0,a=t.length;a>s;s++)e.push(parseFloat(t[s]));return e}function A(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}function R(t){var e=new Image;return"naturalWidth"in e&&"string"!=typeof t?{width:t.naturalWidth,height:t.naturalHeight}:(e.src=t.src||t,{width:e.width,height:e.height})}var P={RECT:"rect",CIRCLE:"circle",ELLIPSE:"ellipse",TEXT:"text",IMAGE:"image",POLY:"poly",POLYLINE:"polyline",POLYGON:"polygon"},Y={isEditMode:!1,shape:P.RECT,shapeText:"press on link",shapeStyle:{fill:"#ffffff","fill-opacity":.2,stroke:"#ffffff","stroke-width":3},onClick:t.noop,onMouseDown:t.noop,onMouseMove:t.noop,onMouseUp:t.noop,onSelect:t.noop},X={rect:[0,0,20,20],circle:[0,0,10],ellipse:[0,0,5,5],text:[0,0,12]},O=.5,N="http://www.w3.org/2000/svg",G="http://www.w3.org/1999/xlink";e.prototype.createMaps=function(e,a){var i=this.container.width();isNaN(i)||!i?this.container.one("load",t.proxy(s,this,e,a)):s.call(this,e,a)},e.prototype.setShapeType=function(t){this.shapeType=t},e.prototype.setShapeStyle=function(e){e=e||{},this.shapeStyle=t.extend({},!0,this.shapeStyle,e)},e.prototype.setUrl=function(t,e){},e.prototype.setTextShape=function(t,e){this.setShapeStyle(e),this.shapeText=t},e.prototype.setImageShape=function(t,e){this.setShapeStyle(e),this.shapeImageUrl=t},e.prototype.addShape=function(t,e,s){!!s&&this.setShapeType(s),this.createMaps(t,e)},e.prototype.removeShape=function(t){if(this.shapeEl){"undefined"==typeof t&&(t=this.shapeEl.data("index"));var e=this.mapEl.find('area[data-index="'+t+'"]'),s=this.svgEl.find('._shape_face[data-index="'+t+'"]');this.detachEvents(s,[{type:"click touchend"}]),s.parent().remove(),e.remove(),this.removeShapeInfo(t)}},e.prototype.removeAllShapes=function(){if(this.shapeEl){for(var e=this.svgEl.find("._shape_face"),s=0,a=e.length;a>s;s++)this.removeShape(t(e[s]).data("index"));this.allShapeInfo={}}},e.prototype.removeImageMaps=function(){this.removeAllShapes(),this.svgEl&&this.svgEl.remove()},e.prototype.updateShapeInfo=function(e,s,a){var i=this.allShapeInfo;s.index=e,i["shape"+e]?i["shape"+e]=t.extend(!0,{},i["shape"+e],s,a):i["shape"+e]=t.extend(!0,s,a)},e.prototype.removeShapeInfo=function(t){delete this.allShapeInfo["shape"+t]},e.prototype.getShapeInfo=function(t){return this.allShapeInfo["shape"+t]},e.prototype.getAllShapesInfo=function(){return t.extend(!0,{},this.allShapeInfo)},e.prototype.getCoordsByRatio=function(t,e,s,a){return b(t,e,s,a)},e.prototype.zoom=function(t){x.call(this,t)},e.prototype.enableClick=function(){this.attachEvents(this.svgEl.find("._shape_face"),[{type:"touchstart",handler:f},{type:"click touchend",handler:u}])},e.prototype.disableClick=function(){this.detachEvents(this.svgEl.find("._shape_face"),[{type:"touchstart",handler:f},{type:"click touchend",handler:u}])},e.prototype.setShapeCoords=function(t){this.shapeCoords=t},e.prototype.setVertexCoords=function(t){this.vertexCoords=t},e.prototype.setShapeElement=function(t){this.shapeEl=t},e.prototype.setVertexElement=function(t){this.vertexEl=t},e.prototype.setVertexElements=function(t){this.vertexEls=t},e.prototype.attachEvents=function(e,s){e=t(e);for(var a=0,i=s.length;i>a;a++)e.on(s[a].type+".area",t.proxy(s[a].handler,this))},e.prototype.detachEvents=function(e,s){e=t(e);for(var a=0,i=s.length;i>a;a++){var r=s[a].type||"",h=s[a].handler?t.proxy(s[a].handler,this):"";h?e.off(r+".area",h):e.off(r+".area")}},t.fn.extend({createMaps:function(t,e){return this.data("image_maps_inst").createMaps(t,e),this},addShape:function(t,e,s){return this.data("image_maps_inst").addShape(t,e,s),this},removeShape:function(t){return this.data("image_maps_inst").removeShape(t),this},removeAllShapes:function(){this.data("image_maps_inst").removeAllShapes()},destroy:function(){var t=this.data("image_maps_inst");t&&(t.removeImageMaps(),delete this.data("image_maps_inst"),this.data("image_maps_inst",null))},setShapeStyle:function(t){return this.data("image_maps_inst").setShapeStyle(t),this},setUrl:function(t,e){return this.data("image_maps_inst").setUrl(t,e),this},setTextShape:function(t,e){return this.data("image_maps_inst").setTextShape(t,e),this},setImageShape:function(t,e){return this.data("image_maps_inst").setImageShape(t,e),this},enableClick:function(){this.data("image_maps_inst").enableClick()},disableClick:function(){this.data("image_maps_inst").disableClick()},getAllShapes:function(){return this.data("image_maps_inst").getAllShapesInfo()},getCoordsByRatio:function(t,e,s,a){return this.data("image_maps_inst").getCoordsByRatio(t,e,s,a)},zoom:function(t){this.data("image_maps_inst").zoom(t)}}),t.fn.imageMaps=function(t){if(1===this.length){if(!this.data("image_maps_inst")){var s=new e(this,t);return this.data("image_maps_inst",s),s}return this.data("image_maps_inst")}if(this.length>1)throw new Error("Already imageMaps instance has been created.")}});